{
  "hash": "296a1d279adde6d84f3019a202a0d3a4",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Analysis\"\n---\n\n\nGoals of this analysis: \n\n- Compare the 31 states and the entity of Mexico City in terms of the climate change index, water insecurity, groundwater access and reforestation efforts in a line chart to visualize the data. \n- How does each state rank in each of the categories? Which are the best and worst states?  \n \n\n## Setting up \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(janitor)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(rvest)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'rvest'\n\nThe following object is masked from 'package:readr':\n\n    guess_encoding\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(httr2)\nlibrary(clipr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWelcome to clipr. See ?write_clip for advisories on writing to the clipboard in R.\n```\n\n\n:::\n:::\n\n\n\n## Importing the cleaned data \n\nHere I am importing the data from my cleaning notebook so that I can start my analysis. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nall_the_data <- read_rds(\"data-processed/01-finaldata.rds\")\n\n\nall_the_data |> glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1,042\nColumns: 5\n$ unidad_geografica_str <chr> \"Aguascalientes\", \"Durango\", \"Guanajuato\", \"Guer…\n$ valor                 <dbl> 69.636, 49.621, 54.721, 32.021, 37.715, 63.833, …\n$ ano                   <int> 2011, 2011, 2011, 2011, 2011, 2011, 2011, 2011, …\n$ cve_unidad_geografica <int> 1, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 2, 20…\n$ source                <chr> \"climate\", \"climate\", \"climate\", \"climate\", \"cli…\n```\n\n\n:::\n:::\n\n\n\n\n## Climate change index \n\nTo look at how the different states perform per year, I want to create a line chart for the climate change index score. \n\nHere we will prepare the data to isolate the climate change index: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nclimate_change_index <- all_the_data |>\n  filter(source == \"climate\") |>\n  group_by(unidad_geografica_str, ano) |>\n  select(unidad_geografica_str, valor, ano) |> \n  mutate(ano= str_c(\"01-01-\", ano) |> mdy() ) |> \n    filter(unidad_geografica_str != \"Nacional\") \n\n  \n\nclimate_change_index\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 384 × 3\n# Groups:   unidad_geografica_str, ano [384]\n   unidad_geografica_str valor ano       \n   <chr>                 <dbl> <date>    \n 1 Aguascalientes         69.6 2011-01-01\n 2 Durango                49.6 2011-01-01\n 3 Guanajuato             54.7 2011-01-01\n 4 Guerrero               32.0 2011-01-01\n 5 Hidalgo                37.7 2011-01-01\n 6 Jalisco                63.8 2011-01-01\n 7 México                 55.7 2011-01-01\n 8 Michoacán              47.9 2011-01-01\n 9 Morelos                58.1 2011-01-01\n10 Nayarit                53.6 2011-01-01\n# ℹ 374 more rows\n```\n\n\n:::\n:::\n\n\nHere I am preparing the data by making a vector: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nclimate_change_list <- all_the_data |> distinct(unidad_geografica_str) |> pull(unidad_geografica_str) \n\n\nclimate_change_list\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Aguascalientes\"      \"Durango\"             \"Guanajuato\"         \n [4] \"Guerrero\"            \"Hidalgo\"             \"Jalisco\"            \n [7] \"México\"              \"Michoacán\"           \"Morelos\"            \n[10] \"Nayarit\"             \"Nuevo León\"          \"Baja California\"    \n[13] \"Oaxaca\"              \"Puebla\"              \"Querétaro\"          \n[16] \"Quintana Roo\"        \"San Luis Potosí\"     \"Sinaloa\"            \n[19] \"Sonora\"              \"Tabasco\"             \"Tamaulipas\"         \n[22] \"Tlaxcala\"            \"Baja California Sur\" \"Veracruz\"           \n[25] \"Yucatán\"             \"Zacatecas\"           \"Campeche\"           \n[28] \"Coahuila\"            \"Colima\"              \"Chiapas\"            \n[31] \"Chihuahua\"           \"Ciudad de México\"    \"Nacional\"           \n```\n\n\n:::\n:::\n\n\n\nNow we will plot using a function for each of the Mexican states: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_climate <- function(plot_state) {\n  climate_change_index |> \n  filter(unidad_geografica_str == plot_state, unidad_geografica_str != \"Nacional\") |>\n  ggplot(aes(x = ano, y = valor, color = unidad_geografica_str)) +\n  geom_point() + \n  geom_line() +\n  labs(title = str_glue(\"Climate change index for all Mexican states: \", plot_state|> str_to_title()), x= \"year\", y= \"Value\", color = \"State\", subtitle = str_wrap(\"The climate change index measures the performance of each state when it comes to good use of natural resoures. In most recent years, most states have seen a decrease in scores.\"), caption = \"Source = Consejo Nuevo León\") \n}\n\n## This is an example to make sure that it works: \nplot_climate(climate_change_list[[1]])\n```\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\nNow we will map the function to plot all of the states: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nclimate_change_list |> \n  map(plot_climate) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[[1]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[2]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[3]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-3.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[4]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-4.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[5]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-5.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[6]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-6.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[7]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-7.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[8]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-8.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[9]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-9.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[10]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-10.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[11]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-11.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[12]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-12.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[13]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-13.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[14]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-14.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[15]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-15.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[16]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-16.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[17]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-17.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[18]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-18.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[19]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-19.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[20]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-20.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[21]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-21.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[22]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-22.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[23]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-23.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[24]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-24.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[25]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-25.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[26]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-26.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[27]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-27.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[28]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-28.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[29]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-29.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[30]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-30.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[31]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-31.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[32]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-32.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[33]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-6-33.png){width=672}\n:::\n:::\n\n\nI noticed a trend with a significant drop in scores throughout many charts in the year 2018. \n\nI'm going to plot all of the states together to observe this: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nclimate_joint_chart <- climate_change_index |> \n  ggplot(aes(x = ano, y = valor, color = unidad_geografica_str)) +\n  geom_point() + \n  geom_line() +\n labs(title = \"Climate change index for all Mexican states\", subtitle= str_wrap(\"The climate change index score of most Mexican states dropped significantly in 2018, the year current President Andres Manuel Lopez Obrador came into power.\"), x = \"Year\", y = \"Value\", color = \"State\", caption = \"Source = Consejo Nuevo León\"\n) +\n  theme(legend.position = \"bottom\")\n\n\n ggsave(\"figures/climate_joint_chart.png\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n\n\n\n![](figures/climate_joint_chart.png) \n\nNote: \"Nacional,\" which represents all of the states combined, has no data. \n\nData takeaways: The overall climate change index levels have decreased in recent years. The entity of Mexico City was consistently scored the highest since 2011, while the state of Quintana Roo stays closer to the bottom of the ranking with a low score of 13.143 in 2022. Meanwhile, the states of Hidalgo and Oaxaca improved significantly during the pandemic years. \n\nThe decrease in score began some time before the pandemic, around 2018. Interestingly enough, President Andres Manuel Lopez Obrador came into office in Dec. 2018. More exploration and reporting would be needed to explain if there is a relationship between the lower scores and this event. \n\n\n## Water insecurity \n\nNow I want to compare the percentage of homes that the Household Water Insecurity Experiences-HWISE qualifies as going through drinking water insecurity. This data focuses on data just from 2021 to 2022. \n\nThis particular data set also includes \"Nacional\" which represents the average percentage of homes dealing with water insecurity in the entire country. \n\nHere I am preparing the data: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nwater_insecurity_percent <- all_the_data |>\n  filter(source == \"water_insecurity\") |>\n  group_by(unidad_geografica_str, ano) |>\n  select(unidad_geografica_str, valor, ano) |>\n  mutate(ano= str_c(\"01-01-\", ano) |> mdy() )\n\n\nwater_insecurity_percent\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 66 × 3\n# Groups:   unidad_geografica_str, ano [66]\n   unidad_geografica_str valor ano       \n   <chr>                 <dbl> <date>    \n 1 Nacional              15.4  2021-01-01\n 2 Aguascalientes        17.4  2021-01-01\n 3 Durango                9.33 2021-01-01\n 4 Guanajuato             8.72 2021-01-01\n 5 Guerrero              26.1  2021-01-01\n 6 Hidalgo               16.0  2021-01-01\n 7 Jalisco               21.6  2021-01-01\n 8 México                24.2  2021-01-01\n 9 Michoacán             20.4  2021-01-01\n10 Morelos               19.3  2021-01-01\n# ℹ 56 more rows\n```\n\n\n:::\n:::\n\n\n\nI am going to visualise the data with a vector: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nwater_insecurity_list <- all_the_data |> distinct(unidad_geografica_str) |> pull(unidad_geografica_str)\n\nwater_insecurity_list\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Aguascalientes\"      \"Durango\"             \"Guanajuato\"         \n [4] \"Guerrero\"            \"Hidalgo\"             \"Jalisco\"            \n [7] \"México\"              \"Michoacán\"           \"Morelos\"            \n[10] \"Nayarit\"             \"Nuevo León\"          \"Baja California\"    \n[13] \"Oaxaca\"              \"Puebla\"              \"Querétaro\"          \n[16] \"Quintana Roo\"        \"San Luis Potosí\"     \"Sinaloa\"            \n[19] \"Sonora\"              \"Tabasco\"             \"Tamaulipas\"         \n[22] \"Tlaxcala\"            \"Baja California Sur\" \"Veracruz\"           \n[25] \"Yucatán\"             \"Zacatecas\"           \"Campeche\"           \n[28] \"Coahuila\"            \"Colima\"              \"Chiapas\"            \n[31] \"Chihuahua\"           \"Ciudad de México\"    \"Nacional\"           \n```\n\n\n:::\n:::\n\n\nNow I am plotting the data for each Mexican state with a function: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_water_insecurity <- function(plot_state) {\n  water_insecurity_percent |> \n  filter(unidad_geografica_str == plot_state) |>\n  ggplot(aes(x = ano, y = valor, color = unidad_geografica_str)) +\n  geom_point() + \n  geom_col() +\n  labs(title = str_glue(\"Percentage of water insecurity in all 32 Mexican states: \", plot_state|> str_to_title()), x= \"Year\", y= \"Value\", color = \"State\", subtitle = str_wrap(\"The state of Nuevo León had a drastic increase in homes experiencing water insecurity, with almost half of homes not having enough access to water in 2022.\"), caption = \"Source = Consejo Nuevo León\"\n)\n}\n\n## This is an example to make sure that it works: \nplot_water_insecurity(water_insecurity_list[[1]])\n```\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\nNow I will list out the rest of the Mexican states: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nwater_insecurity_list |> \n  map(plot_water_insecurity)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[[1]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[2]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-2.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[3]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-3.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[4]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-4.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[5]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-5.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[6]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-6.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[7]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-7.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[8]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-8.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[9]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-9.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[10]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-10.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[11]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-11.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[12]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-12.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[13]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-13.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[14]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-14.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[15]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-15.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[16]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-16.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[17]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-17.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[18]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-18.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[19]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-19.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[20]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-20.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[21]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-21.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[22]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-22.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[23]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-23.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[24]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-24.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[25]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-25.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[26]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-26.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[27]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-27.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[28]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-28.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[29]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-29.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[30]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-30.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[31]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-31.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[32]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-32.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[33]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-11-33.png){width=672}\n:::\n:::\n\n\nData takeaways:  The state of Nuevo León saw a drastic increase in homes experiencing water insecurity from 2021 to 2022. The percentage of homes increased from 7.004% to 42.014% or almost half of the population. Meanwhile, in the state of Tabasco, the percentage of homes dealing with water insecurity dropped from 38.690% to 10.830%.\n\n\n## Groundwater \n\nNow I will look at the volume of available groundwater that can be used by each population in a way that will not hurt the environment. \n\nThe data for this variable only accounts for information from 2018 and 2020. \n\nHere I prepared the data: \n\n\n::: {.cell}\n\n```{.r .cell-code}\ngroundwater_volume <- all_the_data |>\n  filter(source == \"groundwater\") |>\n  group_by(unidad_geografica_str, ano) |>\n  select(unidad_geografica_str, valor, ano) |>\n  mutate(ano= str_c(\"01-01-\", ano) |> mdy() )\n\n\ngroundwater_volume\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 64 × 3\n# Groups:   unidad_geografica_str, ano [64]\n   unidad_geografica_str  valor ano       \n   <chr>                  <dbl> <date>    \n 1 Aguascalientes        -108.  2018-01-01\n 2 Durango                 30   2018-01-01\n 3 Guanajuato            -465.  2018-01-01\n 4 Guerrero               762.  2018-01-01\n 5 Hidalgo                236.  2018-01-01\n 6 Jalisco               -246.  2018-01-01\n 7 México                -350.  2018-01-01\n 8 Michoacán              228.  2018-01-01\n 9 Morelos                 37.2 2018-01-01\n10 Nayarit                 93.3 2018-01-01\n# ℹ 54 more rows\n```\n\n\n:::\n:::\n\n\nNow I will visualize the data by building a function specific to ground water data: \n\n\n::: {.cell}\n\n```{.r .cell-code}\ngroundwater_list <- all_the_data |> distinct(unidad_geografica_str) |> pull(unidad_geografica_str)\n\ngroundwater_list\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Aguascalientes\"      \"Durango\"             \"Guanajuato\"         \n [4] \"Guerrero\"            \"Hidalgo\"             \"Jalisco\"            \n [7] \"México\"              \"Michoacán\"           \"Morelos\"            \n[10] \"Nayarit\"             \"Nuevo León\"          \"Baja California\"    \n[13] \"Oaxaca\"              \"Puebla\"              \"Querétaro\"          \n[16] \"Quintana Roo\"        \"San Luis Potosí\"     \"Sinaloa\"            \n[19] \"Sonora\"              \"Tabasco\"             \"Tamaulipas\"         \n[22] \"Tlaxcala\"            \"Baja California Sur\" \"Veracruz\"           \n[25] \"Yucatán\"             \"Zacatecas\"           \"Campeche\"           \n[28] \"Coahuila\"            \"Colima\"              \"Chiapas\"            \n[31] \"Chihuahua\"           \"Ciudad de México\"    \"Nacional\"           \n```\n\n\n:::\n:::\n\n\nNow I will plot the data for each state: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_groundwater <- function(plot_state) {\n  groundwater_volume |> \n  filter(unidad_geografica_str == plot_state) |>\n  ggplot(aes(x = ano, y = valor, color = unidad_geografica_str)) +\n  geom_point() + \n  geom_col() +\n  labs(title = str_glue(\"Volume of available groundwater in each Mexican state: \", plot_state|> str_to_title()), x= \"Year\", y= \"Value\", color = \"State\", subtitle = str_wrap(\"Many states like Nuevo León are experiencing an increasing deficit of groundwater availablility.\"), caption = \"Source = Consejo Nuevo León\"\n)\n}\n\n## This is an example to make sure that it works: \nplot_groundwater(groundwater_list[[1]])\n```\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nNow I will plot each state: \n\n\n::: {.cell}\n\n```{.r .cell-code}\ngroundwater_list |> \n  map(plot_groundwater)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[[1]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[2]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-2.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[3]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-3.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[4]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-4.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[5]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-5.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[6]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-6.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[7]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-7.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[8]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-8.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[9]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-9.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[10]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-10.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[11]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-11.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[12]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-12.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[13]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-13.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[14]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-14.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[15]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-15.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[16]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-16.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[17]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-17.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[18]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-18.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[19]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-19.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[20]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-20.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[21]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-21.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[22]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-22.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[23]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-23.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[24]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-24.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[25]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-25.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[26]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-26.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[27]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-27.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[28]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-28.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[29]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-29.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[30]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-30.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[31]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-31.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[32]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-32.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[33]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-15-33.png){width=672}\n:::\n:::\n\n\n\nData takeaways: The availability of groundwater in 2018 decreased from -131.490 to -294.150 millions of cubic meters of groundwater, meaning that there is an increase in the deficit volume of groundwater in this state. Nuevo León went through an intense drought in 2022, whose data is not included. \n\n## Reforestation \n\nLastly, I will add the data for the hectares of reforestation done by each state. This data also includes \"Nacional\" or the amount of hectares reforested in the entire nation by year. \n\nI prepare the data: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nreforestation_hectares <- all_the_data |>\n  filter(source == \"reforestation\") |>\n  group_by(unidad_geografica_str, ano) |>\n  select(unidad_geografica_str, valor, ano) |>\n  mutate(ano= str_c(\"01-01-\", ano) |> mdy() )\n\nreforestation_hectares\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 528 × 3\n# Groups:   unidad_geografica_str, ano [528]\n   unidad_geografica_str   valor ano       \n   <chr>                   <dbl> <date>    \n 1 Nacional              14513.  1993-01-01\n 2 Aguascalientes          123.  1993-01-01\n 3 Durango                 648.  1993-01-01\n 4 Guanajuato               42.8 1993-01-01\n 5 Guerrero                737.  1993-01-01\n 6 Hidalgo                 285.  1993-01-01\n 7 Jalisco                 316.  1993-01-01\n 8 México                  734   1993-01-01\n 9 Michoacán               802.  1993-01-01\n10 Morelos                 982.  1993-01-01\n# ℹ 518 more rows\n```\n\n\n:::\n:::\n\n\nNow I will do my last iteration with this data: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nreforestation_list <- all_the_data |> distinct(unidad_geografica_str) |> pull(unidad_geografica_str)\n\nreforestation_list\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Aguascalientes\"      \"Durango\"             \"Guanajuato\"         \n [4] \"Guerrero\"            \"Hidalgo\"             \"Jalisco\"            \n [7] \"México\"              \"Michoacán\"           \"Morelos\"            \n[10] \"Nayarit\"             \"Nuevo León\"          \"Baja California\"    \n[13] \"Oaxaca\"              \"Puebla\"              \"Querétaro\"          \n[16] \"Quintana Roo\"        \"San Luis Potosí\"     \"Sinaloa\"            \n[19] \"Sonora\"              \"Tabasco\"             \"Tamaulipas\"         \n[22] \"Tlaxcala\"            \"Baja California Sur\" \"Veracruz\"           \n[25] \"Yucatán\"             \"Zacatecas\"           \"Campeche\"           \n[28] \"Coahuila\"            \"Colima\"              \"Chiapas\"            \n[31] \"Chihuahua\"           \"Ciudad de México\"    \"Nacional\"           \n```\n\n\n:::\n:::\n\n\nNow I plot the data with a function: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_reforestation <- function(plot_state) {\n  reforestation_hectares |> \n  filter(unidad_geografica_str == plot_state) |>\n  ggplot(aes(x = ano, y = valor, color = unidad_geografica_str)) +\n  geom_point() + \n  geom_line() +\n  labs(title = str_glue(\"Hectares reforested in each Mexican state: \", plot_state|> str_to_title()), x= \"Year\", y= \"Value\", color = \"State\", subtitle = str_wrap(\"At the national level, the most amount of hectares reforested was 375,705.790 in 2012.\"), caption = \"Source = Consejo Nuevo León\"\n)\n}\n\n## This is an example to make sure that it works: \nplot_reforestation(reforestation_list[[1]])\n```\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\nNow I will plot each state: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nreforestation_list |> \n  map(plot_reforestation)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[[1]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[2]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-2.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[3]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-3.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[4]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-4.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[5]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-5.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[6]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-6.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[7]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-7.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[8]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-8.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[9]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-9.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[10]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-10.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[11]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-11.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[12]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-12.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[13]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-13.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[14]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-14.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[15]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-15.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[16]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-16.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[17]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-17.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[18]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-18.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[19]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-19.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[20]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-20.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[21]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-21.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[22]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-22.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[23]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-23.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[24]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-24.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[25]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-25.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[26]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-26.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[27]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-27.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[28]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-28.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[29]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-29.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[30]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-30.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[31]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-31.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[32]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-32.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n[[33]]\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-19-33.png){width=672}\n:::\n:::\n\n\n\nData takeaway: The national amount of hectares reforested is not surprisingly the entity with the highest amount of hectares. The peak of reforestation happened in 2012, with 375,705.790 hectares reforested in 2012. In 2020, the total amount of hectares reforested dropped to a stunning 4,618.38. \n\n\n\n## Comparing all 32 state rankings \n\nHere I will use a ranking to determine how well each state performed in each category. \n\nStarting with the ranking for the climate change index: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nclimate_rank <- climate_change_index |>\n  group_by(ano) |>\n  ## Group by year so I could see the ranking by year \n  mutate(ranking = dense_rank(desc(valor))) |>\n## Then created the rank variable in descending order because a higher score is a better score. \n arrange(desc(valor)) |> \n## I wanted to visualize the highest to lowest scores all together \n  add_column(source = \"Climate\")\nclimate_rank\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 384 × 5\n# Groups:   ano [12]\n   unidad_geografica_str valor ano        ranking source \n   <chr>                 <dbl> <date>       <int> <chr>  \n 1 Ciudad de México       83.4 2015-01-01       1 Climate\n 2 Ciudad de México       83.2 2016-01-01       1 Climate\n 3 Ciudad de México       80.4 2014-01-01       1 Climate\n 4 Ciudad de México       80.2 2013-01-01       1 Climate\n 5 Ciudad de México       80.1 2012-01-01       1 Climate\n 6 Ciudad de México       80.0 2011-01-01       1 Climate\n 7 Ciudad de México       78.3 2018-01-01       1 Climate\n 8 Ciudad de México       77.3 2017-01-01       1 Climate\n 9 Ciudad de México       71.8 2020-01-01       1 Climate\n10 Ciudad de México       71.7 2022-01-01       1 Climate\n# ℹ 374 more rows\n```\n\n\n:::\n:::\n\n\nI am using a column graph to show the ranking distribution of each state per year: \n\n\n::: {.cell}\n\n```{.r .cell-code}\n climate_rank_chart <- climate_rank |>\n  ggplot(aes(fill = ranking, x= ano |> year() |> as.character(), y= unidad_geografica_str)) +\n  geom_tile() + \n  geom_text(aes(label = ranking), color = \"white\")+\n  labs(\n    x = \"Year\",\n    y = \"State\",\n    title = \"Climate change index ranking by year for each Mexican state\",\n    color = \"Ranking\", \n    subtitle = str_wrap(\"Ciudad de México constantly had the highest ranking for climate change index score. Notably, Mexico City has the highest population density of the country.\"), \n  caption = \"Source = Consejo Nuevo León\"\n  ) +\ntheme(legend.position = \"bottom\")\n\n\n ggsave(\"figures/climate_rank_chart.png\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n\n\nNow we print our ranking chart so it looks good on the computer: \n\n![](figures/climate_rank_chart.png)\n\nData takeaway: Ranking each of the 32 federal entities from 1 to 32, we can show that a higher ranking which is associated with a better score performance is represented with a darker blue shade. Aguascalientes and Ciudad de México consistently have a higher ranking per year, while states like Tabasco and Chiapas consistently ranked lower. Ciudad de México is a large urban area, where the data might observe less natural resources. \n\n\nNow I want to look at the water insecurity percentage data and rank each states performance: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nwater_insecurity_rank <- water_insecurity_percent |>\n  group_by(ano) |>\n  ## Group by year so I could see the ranking by year \n  mutate(ranking = dense_rank(valor)) |>\n## Then created the rank variable in descending order because a higher score is a better score. \n arrange(valor) |>\n## I wanted to visualize the highest to lowest scores all together \n  add_column(source = \"Water insecurity\")\n\n\nwater_insecurity_rank\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 66 × 5\n# Groups:   ano [2]\n   unidad_geografica_str valor ano        ranking source          \n   <chr>                 <dbl> <date>       <int> <chr>           \n 1 Yucatán                3.55 2021-01-01       1 Water insecurity\n 2 Chihuahua              3.85 2021-01-01       2 Water insecurity\n 3 Quintana Roo           4.38 2021-01-01       3 Water insecurity\n 4 Tamaulipas             4.52 2021-01-01       4 Water insecurity\n 5 Tlaxcala               5.14 2022-01-01       1 Water insecurity\n 6 Yucatán                5.50 2022-01-01       2 Water insecurity\n 7 Campeche               6.72 2022-01-01       3 Water insecurity\n 8 Nuevo León             7.00 2021-01-01       5 Water insecurity\n 9 Sinaloa                7.32 2022-01-01       4 Water insecurity\n10 Colima                 7.65 2021-01-01       6 Water insecurity\n# ℹ 56 more rows\n```\n\n\n:::\n:::\n\n\nNow I want to visualize the ranking: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nwater_insecurity_chart <- water_insecurity_rank |>\n  ggplot(aes(fill = ranking, x= ano |> year() |> as.character(), y= unidad_geografica_str)) +\n  geom_tile() +\n  geom_text(aes(label = ranking), color = \"white\") +\n  labs(\n    x = \"Year\",\n    y = \"State\",\n    title = \"Water insecurity performance ranking by year for each Mexican state\",\n    color = \"Ranking\",\n    subtitle = str_wrap(\"Nuevo León had 7.004% of homes with not enough available water in 2021, ranking in fifth place compared to other states. In 2022, the state ranked in last place with 42.014% of homes experiencing water insecurity in 2022.\"), \n    caption = \"Source = Consejo Nuevo León\"\n  ) +\ntheme(legend.position = \"bottom\")\n\n\n ggsave(\"figures/water_insecurity_chart.png\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n\n\n![](figures/water_insecurity_chart.png)\n\n\nGroundwater ranking for the states with the most amount of groundwater is represented with this data: \n\n\n::: {.cell}\n\n```{.r .cell-code}\ngroundwater_rank <- groundwater_volume |>\n  group_by(ano) |>\n  ## Group by year so I could see the ranking by year \n  mutate(ranking = dense_rank(desc(valor))) |>\n## Then created the rank variable in descending order because a higher score is a better score. \n arrange(desc(valor)) |> \n## I wanted to visualize the highest to lowest scores all together \n   add_column(source = \"Groundwater\")\n \n\ngroundwater_rank\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 64 × 5\n# Groups:   ano [2]\n   unidad_geografica_str valor ano        ranking source     \n   <chr>                 <dbl> <date>       <int> <chr>      \n 1 Tabasco               7613. 2018-01-01       1 Groundwater\n 2 Tabasco               7556. 2020-01-01       1 Groundwater\n 3 Yucatán               2843. 2018-01-01       2 Groundwater\n 4 Chiapas               2755. 2020-01-01       2 Groundwater\n 5 Chiapas               2747. 2018-01-01       3 Groundwater\n 6 Yucatán               2387. 2020-01-01       3 Groundwater\n 7 Guerrero               762. 2018-01-01       4 Groundwater\n 8 Guerrero               719. 2020-01-01       4 Groundwater\n 9 Veracruz               655. 2018-01-01       5 Groundwater\n10 Veracruz               528. 2020-01-01       5 Groundwater\n# ℹ 54 more rows\n```\n\n\n:::\n:::\n\n\n\nNow we will visualize the groundwater ranking: \n\n\n::: {.cell}\n\n```{.r .cell-code}\ngroundwater_chart <- groundwater_rank |>\n  ggplot(aes(fill = ranking, x= ano |> year() |> as.character(), y= unidad_geografica_str)) +\n  geom_tile() +\n  geom_text(aes(label = ranking), color= \"white\") +\n  labs(\n    x = \"Year\",\n    y = \"State\",\n    title = \"Amount of available groundwater volume for each Mexican state\",\n    color = \"Ranking\", \n    subtitle = str_wrap(\"Nuevo León has a significant deficit of groundwater availablility, with -294.150 millions of cubic meters of groundwater.\"), \n    caption = \"Source = Consejo Nuevo León\"\n  ) +\ntheme(legend.position = \"bottom\")\n\n\n ggsave(\"figures/groundwater_chart.png\") \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n\n\n\n![](figures/groundwater_chart.png)\n\nFinally, lets look at the ranking for reforestation efforts in each state: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nreforestation_rank <- reforestation_hectares |> \n  filter(unidad_geografica_str != \"Nacional\") |>\n  group_by(ano) |>\n  ## Group by year so I could see the ranking by year \n  mutate(ranking = dense_rank(desc(valor))) |>\n## Then created the rank variable in descending order because a higher score is a better score. \n arrange(desc(valor)) |> \n## I wanted to visualize the highest to lowest scores all together \n  add_column(source = \"Reforestation\")\n\n\nreforestation_rank\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 512 × 5\n# Groups:   ano [16]\n   unidad_geografica_str  valor ano        ranking source       \n   <chr>                  <dbl> <date>       <int> <chr>        \n 1 San Luis Potosí       35176. 2012-01-01       1 Reforestation\n 2 Coahuila              31747  2012-01-01       2 Reforestation\n 3 Veracruz              29315. 2012-01-01       3 Reforestation\n 4 Zacatecas             28395  2012-01-01       4 Reforestation\n 5 Coahuila              24380  2011-01-01       1 Reforestation\n 6 Chiapas               24009. 2012-01-01       5 Reforestation\n 7 Veracruz              23735  2005-01-01       1 Reforestation\n 8 Puebla                22390. 2012-01-01       6 Reforestation\n 9 Tamaulipas            21571  2000-01-01       1 Reforestation\n10 Quintana Roo          20386  2000-01-01       2 Reforestation\n# ℹ 502 more rows\n```\n\n\n:::\n:::\n\n\n\nNow I will visualize the data using ggplot: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nreforestation_chart <- reforestation_rank |>\n  ggplot(aes(fill = ranking, x= ano |> year() |> as.character(), y= unidad_geografica_str)) +\n  geom_tile() +\n  geom_text(aes(label = ranking), color = \"white\") + \n  labs(\n    x = \"Year\",\n    y = \"State\",\n    title = \"Hectares reforested in each Mexican state\",\n    color = \"Ranking\", \n    subtitle = str_wrap(\"Hectares of reforested areas in each state vary consistently. The year 2012 had a significant increase in reforested areas, with states like San Luis Potosi and Coahuila leading in rank.\"), \n   caption = \"Source = Consejo Nuevo León\"\n  ) +\ntheme(legend.position = \"bottom\")\n\n\n ggsave(\"figures/reforestation_chart.png\") \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n\n\n![](figures/reforestation_chart.png)\n\n## Nuevo León ranking \n\nIn order to see how my home state of Nuevo León did in all of the categories I have to put the ranking data together: \n\nI will combine the ranking using bind.rows: \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnuevo_leon_ranking <- \nbind_rows(climate_rank, water_insecurity_rank, groundwater_rank, reforestation_rank) |> \n  filter(unidad_geografica_str == \"Nuevo León\")\n\nnuevo_leon_ranking\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 32 × 5\n# Groups:   ano [17]\n   unidad_geografica_str valor ano        ranking source \n   <chr>                 <dbl> <date>       <int> <chr>  \n 1 Nuevo León             68.8 2014-01-01       3 Climate\n 2 Nuevo León             68.1 2016-01-01       3 Climate\n 3 Nuevo León             67.4 2015-01-01       2 Climate\n 4 Nuevo León             66.1 2013-01-01       3 Climate\n 5 Nuevo León             62.7 2012-01-01       3 Climate\n 6 Nuevo León             59.9 2017-01-01       4 Climate\n 7 Nuevo León             57.6 2011-01-01       9 Climate\n 8 Nuevo León             56.1 2018-01-01       5 Climate\n 9 Nuevo León             39.0 2019-01-01       5 Climate\n10 Nuevo León             37.6 2022-01-01       4 Climate\n# ℹ 22 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\n## We added the source column in each ranking break down \n```\n:::\n\n\n\nVisualize the ranking for Nuevo León: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nnuevo_leon_ranking  |>\n  ggplot(aes(fill = ranking, x= ano |> year() |> as.character(), y= source)) +\n   geom_tile()+\n   geom_text(aes(label = ranking), color = \"white\") +\n  labs(\n    x = \"Year\",\n    y = \"Category\",\n    title = \"Nuevo León ranking in all four categories\",\n    color = \"Ranking\", \n    subtitle = str_wrap(\"Each tile represents the ranking position of the state of Nuevo León for the four different categories: climate change index, water insecurity, groundwater and reforestation. Even though Nuevo León placed 33rd in 2022 for water insecurity, which is the lowest ranking position, the state ranked fourth in the same year for climate change index.\"), \n    caption = \"Source = Consejo Nuevo León\"\n  ) +\ntheme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](02-analysis_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n\n```{.r .cell-code}\n ggsave(\"figures/nuevo_leon_ranking.png\") \n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nSaving 7 x 5 in image\n```\n\n\n:::\n:::\n\n\n![](figures/nuevo_leon_ranking.png)\n\n\nData takeaways: Each tile represents the ranking position of the state of Nuevo León for the four different categories: climate change index, water insecurity, groundwater and reforestation. Even though Nuevo León placed thirty third in 2022 for water insecurity (including the ranking for the whole nation plus 32 federal entities), which is the lowest ranking, the state ranked fourth in the same year for climate change index, or how well the state uses its natural resources. Extra reporting and investigation would be needed to asses these contrasting results.  \n\nFor the category of reforestation, Nuevo León has significantly improved when compared to other states. In 1993, Nuevo León occupied 16th place, but moved up to fourth in 2022. \n\n\n\n\n\n\n\n",
    "supporting": [
      "02-analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}