<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>mariaprobert-final - Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">mariaprobert-final</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./01-cleaning.html"> 
<span class="menu-text">Cleaning</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./02-analysis.html" aria-current="page"> 
<span class="menu-text">Analysis</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setting-up" id="toc-setting-up" class="nav-link active" data-scroll-target="#setting-up">Setting up</a></li>
  <li><a href="#importing-the-cleaned-data" id="toc-importing-the-cleaned-data" class="nav-link" data-scroll-target="#importing-the-cleaned-data">Importing the cleaned data</a></li>
  <li><a href="#climate-change-index" id="toc-climate-change-index" class="nav-link" data-scroll-target="#climate-change-index">Climate change index</a></li>
  <li><a href="#water-insecurity" id="toc-water-insecurity" class="nav-link" data-scroll-target="#water-insecurity">Water insecurity</a></li>
  <li><a href="#groundwater" id="toc-groundwater" class="nav-link" data-scroll-target="#groundwater">Groundwater</a></li>
  <li><a href="#reforestation" id="toc-reforestation" class="nav-link" data-scroll-target="#reforestation">Reforestation</a></li>
  <li><a href="#comparing-all-32-state-rankings" id="toc-comparing-all-32-state-rankings" class="nav-link" data-scroll-target="#comparing-all-32-state-rankings">Comparing all 32 state rankings</a></li>
  <li><a href="#nuevo-león-ranking" id="toc-nuevo-león-ranking" class="nav-link" data-scroll-target="#nuevo-león-ranking">Nuevo León ranking</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Goals of this analysis:</p>
<ul>
<li>Compare the 31 states and the entity of Mexico City in terms of the climate change index, water insecurity, groundwater access and reforestation efforts in a line chart to visualize the data.</li>
<li>How does each state rank in each of the categories? Which are the best and worst states?</li>
</ul>
<section id="setting-up" class="level2">
<h2 class="anchored" data-anchor-id="setting-up">Setting up</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'janitor'

The following objects are masked from 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'rvest'

The following object is masked from 'package:readr':

    guess_encoding</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(clipr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Welcome to clipr. See ?write_clip for advisories on writing to the clipboard in R.</code></pre>
</div>
</div>
</section>
<section id="importing-the-cleaned-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-the-cleaned-data">Importing the cleaned data</h2>
<p>Here I am importing the data from my cleaning notebook so that I can start my analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>all_the_data <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"data-processed/01-finaldata.rds"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>all_the_data <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,042
Columns: 5
$ unidad_geografica_str &lt;chr&gt; "Aguascalientes", "Durango", "Guanajuato", "Guer…
$ valor                 &lt;dbl&gt; 69.636, 49.621, 54.721, 32.021, 37.715, 63.833, …
$ ano                   &lt;int&gt; 2011, 2011, 2011, 2011, 2011, 2011, 2011, 2011, …
$ cve_unidad_geografica &lt;int&gt; 1, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 2, 20…
$ source                &lt;chr&gt; "climate", "climate", "climate", "climate", "cli…</code></pre>
</div>
</div>
</section>
<section id="climate-change-index" class="level2">
<h2 class="anchored" data-anchor-id="climate-change-index">Climate change index</h2>
<p>To look at how the different states perform per year, I want to create a line chart for the climate change index score.</p>
<p>Here we will prepare the data to isolate the climate change index:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>climate_change_index <span class="ot">&lt;-</span> all_the_data <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"climate"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unidad_geografica_str, ano) <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(unidad_geografica_str, valor, ano) <span class="sc">|&gt;</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano=</span> <span class="fu">str_c</span>(<span class="st">"01-01-"</span>, ano) <span class="sc">|&gt;</span> <span class="fu">mdy</span>() ) <span class="sc">|&gt;</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(unidad_geografica_str <span class="sc">!=</span> <span class="st">"Nacional"</span>) </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>climate_change_index</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 384 × 3
# Groups:   unidad_geografica_str, ano [384]
   unidad_geografica_str valor ano       
   &lt;chr&gt;                 &lt;dbl&gt; &lt;date&gt;    
 1 Aguascalientes         69.6 2011-01-01
 2 Durango                49.6 2011-01-01
 3 Guanajuato             54.7 2011-01-01
 4 Guerrero               32.0 2011-01-01
 5 Hidalgo                37.7 2011-01-01
 6 Jalisco                63.8 2011-01-01
 7 México                 55.7 2011-01-01
 8 Michoacán              47.9 2011-01-01
 9 Morelos                58.1 2011-01-01
10 Nayarit                53.6 2011-01-01
# ℹ 374 more rows</code></pre>
</div>
</div>
<p>Here I am preparing the data by making a vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>climate_change_list <span class="ot">&lt;-</span> all_the_data <span class="sc">|&gt;</span> <span class="fu">distinct</span>(unidad_geografica_str) <span class="sc">|&gt;</span> <span class="fu">pull</span>(unidad_geografica_str) </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>climate_change_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Aguascalientes"      "Durango"             "Guanajuato"         
 [4] "Guerrero"            "Hidalgo"             "Jalisco"            
 [7] "México"              "Michoacán"           "Morelos"            
[10] "Nayarit"             "Nuevo León"          "Baja California"    
[13] "Oaxaca"              "Puebla"              "Querétaro"          
[16] "Quintana Roo"        "San Luis Potosí"     "Sinaloa"            
[19] "Sonora"              "Tabasco"             "Tamaulipas"         
[22] "Tlaxcala"            "Baja California Sur" "Veracruz"           
[25] "Yucatán"             "Zacatecas"           "Campeche"           
[28] "Coahuila"            "Colima"              "Chiapas"            
[31] "Chihuahua"           "Ciudad de México"    "Nacional"           </code></pre>
</div>
</div>
<p>Now we will plot using a function for each of the Mexican states:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>plot_climate <span class="ot">&lt;-</span> <span class="cf">function</span>(plot_state) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  climate_change_index <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unidad_geografica_str <span class="sc">==</span> plot_state, unidad_geografica_str <span class="sc">!=</span> <span class="st">"Nacional"</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ano, <span class="at">y =</span> valor, <span class="at">color =</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">str_glue</span>(<span class="st">"Climate change index for all Mexican states: "</span>, plot_state<span class="sc">|&gt;</span> <span class="fu">str_to_title</span>()), <span class="at">x=</span> <span class="st">"year"</span>, <span class="at">y=</span> <span class="st">"Value"</span>, <span class="at">color =</span> <span class="st">"State"</span>, <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"The climate change index measures the performance of each state when it comes to good use of natural resoures. In most recent years, most states have seen a decrease in scores."</span>), <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span>) </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="do">## This is an example to make sure that it works: </span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_climate</span>(climate_change_list[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now we will map the function to plot all of the states:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>climate_change_list <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(plot_climate) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[2]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[3]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[4]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[5]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[6]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[7]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[8]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[9]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[10]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[11]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[12]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[13]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[14]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[15]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[16]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[17]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[18]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[19]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[20]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[21]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[22]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[23]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[24]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[25]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[26]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[27]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[28]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[29]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[30]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[31]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[32]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[33]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-6-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I noticed a trend with a significant drop in scores throughout many charts in the year 2018.</p>
<p>I’m going to plot all of the states together to observe this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>climate_joint_chart <span class="ot">&lt;-</span> climate_change_index <span class="sc">|&gt;</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ano, <span class="at">y =</span> valor, <span class="at">color =</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Climate change index for all Mexican states"</span>, <span class="at">subtitle=</span> <span class="fu">str_wrap</span>(<span class="st">"The climate change index score of most Mexican states dropped significantly in 2018, the year current President Andres Manuel Lopez Obrador came into power."</span>), <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Value"</span>, <span class="at">color =</span> <span class="st">"State"</span>, <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggsave</span>(<span class="st">"figures/climate_joint_chart.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
</div>
<p><img src="figures/climate_joint_chart.png" class="img-fluid"></p>
<p>Note: “Nacional,” which represents all of the states combined, has no data.</p>
<p>Data takeaways: The overall climate change index levels have decreased in recent years. The entity of Mexico City was consistently scored the highest since 2011, while the state of Quintana Roo stays closer to the bottom of the ranking with a low score of 13.143 in 2022. Meanwhile, the states of Hidalgo and Oaxaca improved significantly during the pandemic years.</p>
<p>The decrease in score began some time before the pandemic, around 2018. Interestingly enough, President Andres Manuel Lopez Obrador came into office in Dec.&nbsp;2018. More exploration and reporting would be needed to explain if there is a relationship between the lower scores and this event.</p>
</section>
<section id="water-insecurity" class="level2">
<h2 class="anchored" data-anchor-id="water-insecurity">Water insecurity</h2>
<p>Now I want to compare the percentage of homes that the Household Water Insecurity Experiences-HWISE qualifies as going through drinking water insecurity. This data focuses on data just from 2021 to 2022.</p>
<p>This particular data set also includes “Nacional” which represents the average percentage of homes dealing with water insecurity in the entire country.</p>
<p>Here I am preparing the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>water_insecurity_percent <span class="ot">&lt;-</span> all_the_data <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"water_insecurity"</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unidad_geografica_str, ano) <span class="sc">|&gt;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(unidad_geografica_str, valor, ano) <span class="sc">|&gt;</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano=</span> <span class="fu">str_c</span>(<span class="st">"01-01-"</span>, ano) <span class="sc">|&gt;</span> <span class="fu">mdy</span>() )</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>water_insecurity_percent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 66 × 3
# Groups:   unidad_geografica_str, ano [66]
   unidad_geografica_str valor ano       
   &lt;chr&gt;                 &lt;dbl&gt; &lt;date&gt;    
 1 Nacional              15.4  2021-01-01
 2 Aguascalientes        17.4  2021-01-01
 3 Durango                9.33 2021-01-01
 4 Guanajuato             8.72 2021-01-01
 5 Guerrero              26.1  2021-01-01
 6 Hidalgo               16.0  2021-01-01
 7 Jalisco               21.6  2021-01-01
 8 México                24.2  2021-01-01
 9 Michoacán             20.4  2021-01-01
10 Morelos               19.3  2021-01-01
# ℹ 56 more rows</code></pre>
</div>
</div>
<p>I am going to visualise the data with a vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>water_insecurity_list <span class="ot">&lt;-</span> all_the_data <span class="sc">|&gt;</span> <span class="fu">distinct</span>(unidad_geografica_str) <span class="sc">|&gt;</span> <span class="fu">pull</span>(unidad_geografica_str)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>water_insecurity_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Aguascalientes"      "Durango"             "Guanajuato"         
 [4] "Guerrero"            "Hidalgo"             "Jalisco"            
 [7] "México"              "Michoacán"           "Morelos"            
[10] "Nayarit"             "Nuevo León"          "Baja California"    
[13] "Oaxaca"              "Puebla"              "Querétaro"          
[16] "Quintana Roo"        "San Luis Potosí"     "Sinaloa"            
[19] "Sonora"              "Tabasco"             "Tamaulipas"         
[22] "Tlaxcala"            "Baja California Sur" "Veracruz"           
[25] "Yucatán"             "Zacatecas"           "Campeche"           
[28] "Coahuila"            "Colima"              "Chiapas"            
[31] "Chihuahua"           "Ciudad de México"    "Nacional"           </code></pre>
</div>
</div>
<p>Now I am plotting the data for each Mexican state with a function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>plot_water_insecurity <span class="ot">&lt;-</span> <span class="cf">function</span>(plot_state) {</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  water_insecurity_percent <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unidad_geografica_str <span class="sc">==</span> plot_state) <span class="sc">|&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ano, <span class="at">y =</span> valor, <span class="at">color =</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">str_glue</span>(<span class="st">"Percentage of water insecurity in all 32 Mexican states: "</span>, plot_state<span class="sc">|&gt;</span> <span class="fu">str_to_title</span>()), <span class="at">x=</span> <span class="st">"Year"</span>, <span class="at">y=</span> <span class="st">"Value"</span>, <span class="at">color =</span> <span class="st">"State"</span>, <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"The state of Nuevo León had a drastic increase in homes experiencing water insecurity, with almost half of homes not having enough access to water in 2022."</span>), <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="do">## This is an example to make sure that it works: </span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_water_insecurity</span>(water_insecurity_list[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now I will list out the rest of the Mexican states:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>water_insecurity_list <span class="sc">|&gt;</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(plot_water_insecurity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[2]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[3]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[4]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[5]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[6]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[7]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[8]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[9]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[10]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[11]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[12]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[13]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[14]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[15]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[16]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[17]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[18]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[19]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[20]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[21]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[22]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[23]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[24]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[25]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[26]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[27]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[28]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[29]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[30]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[31]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[32]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[33]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-11-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Data takeaways: The state of Nuevo León saw a drastic increase in homes experiencing water insecurity from 2021 to 2022. The percentage of homes increased from 7.004% to 42.014% or almost half of the population. Meanwhile, in the state of Tabasco, the percentage of homes dealing with water insecurity dropped from 38.690% to 10.830%.</p>
</section>
<section id="groundwater" class="level2">
<h2 class="anchored" data-anchor-id="groundwater">Groundwater</h2>
<p>Now I will look at the volume of available groundwater that can be used by each population in a way that will not hurt the environment.</p>
<p>The data for this variable only accounts for information from 2018 and 2020.</p>
<p>Here I prepared the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>groundwater_volume <span class="ot">&lt;-</span> all_the_data <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"groundwater"</span>) <span class="sc">|&gt;</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unidad_geografica_str, ano) <span class="sc">|&gt;</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(unidad_geografica_str, valor, ano) <span class="sc">|&gt;</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano=</span> <span class="fu">str_c</span>(<span class="st">"01-01-"</span>, ano) <span class="sc">|&gt;</span> <span class="fu">mdy</span>() )</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>groundwater_volume</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 64 × 3
# Groups:   unidad_geografica_str, ano [64]
   unidad_geografica_str  valor ano       
   &lt;chr&gt;                  &lt;dbl&gt; &lt;date&gt;    
 1 Aguascalientes        -108.  2018-01-01
 2 Durango                 30   2018-01-01
 3 Guanajuato            -465.  2018-01-01
 4 Guerrero               762.  2018-01-01
 5 Hidalgo                236.  2018-01-01
 6 Jalisco               -246.  2018-01-01
 7 México                -350.  2018-01-01
 8 Michoacán              228.  2018-01-01
 9 Morelos                 37.2 2018-01-01
10 Nayarit                 93.3 2018-01-01
# ℹ 54 more rows</code></pre>
</div>
</div>
<p>Now I will visualize the data by building a function specific to ground water data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>groundwater_list <span class="ot">&lt;-</span> all_the_data <span class="sc">|&gt;</span> <span class="fu">distinct</span>(unidad_geografica_str) <span class="sc">|&gt;</span> <span class="fu">pull</span>(unidad_geografica_str)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>groundwater_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Aguascalientes"      "Durango"             "Guanajuato"         
 [4] "Guerrero"            "Hidalgo"             "Jalisco"            
 [7] "México"              "Michoacán"           "Morelos"            
[10] "Nayarit"             "Nuevo León"          "Baja California"    
[13] "Oaxaca"              "Puebla"              "Querétaro"          
[16] "Quintana Roo"        "San Luis Potosí"     "Sinaloa"            
[19] "Sonora"              "Tabasco"             "Tamaulipas"         
[22] "Tlaxcala"            "Baja California Sur" "Veracruz"           
[25] "Yucatán"             "Zacatecas"           "Campeche"           
[28] "Coahuila"            "Colima"              "Chiapas"            
[31] "Chihuahua"           "Ciudad de México"    "Nacional"           </code></pre>
</div>
</div>
<p>Now I will plot the data for each state:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>plot_groundwater <span class="ot">&lt;-</span> <span class="cf">function</span>(plot_state) {</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  groundwater_volume <span class="sc">|&gt;</span> </span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unidad_geografica_str <span class="sc">==</span> plot_state) <span class="sc">|&gt;</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ano, <span class="at">y =</span> valor, <span class="at">color =</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">str_glue</span>(<span class="st">"Volume of available groundwater in each Mexican state: "</span>, plot_state<span class="sc">|&gt;</span> <span class="fu">str_to_title</span>()), <span class="at">x=</span> <span class="st">"Year"</span>, <span class="at">y=</span> <span class="st">"Value"</span>, <span class="at">color =</span> <span class="st">"State"</span>, <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"Many states like Nuevo León are experiencing an increasing deficit of groundwater availablility."</span>), <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a><span class="do">## This is an example to make sure that it works: </span></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_groundwater</span>(groundwater_list[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now I will plot each state:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>groundwater_list <span class="sc">|&gt;</span> </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(plot_groundwater)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[2]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[3]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[4]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[5]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[6]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[7]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[8]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[9]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[10]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[11]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[12]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[13]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[14]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[15]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[16]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[17]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[18]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[19]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[20]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[21]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[22]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[23]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[24]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[25]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[26]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[27]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[28]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[29]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[30]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[31]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[32]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[33]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-15-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Data takeaways: The availability of groundwater in 2018 decreased from -131.490 to -294.150 millions of cubic meters of groundwater, meaning that there is an increase in the deficit volume of groundwater in this state. Nuevo León went through an intense drought in 2022, whose data is not included.</p>
</section>
<section id="reforestation" class="level2">
<h2 class="anchored" data-anchor-id="reforestation">Reforestation</h2>
<p>Lastly, I will add the data for the hectares of reforestation done by each state. This data also includes “Nacional” or the amount of hectares reforested in the entire nation by year.</p>
<p>I prepare the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>reforestation_hectares <span class="ot">&lt;-</span> all_the_data <span class="sc">|&gt;</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(source <span class="sc">==</span> <span class="st">"reforestation"</span>) <span class="sc">|&gt;</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(unidad_geografica_str, ano) <span class="sc">|&gt;</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(unidad_geografica_str, valor, ano) <span class="sc">|&gt;</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano=</span> <span class="fu">str_c</span>(<span class="st">"01-01-"</span>, ano) <span class="sc">|&gt;</span> <span class="fu">mdy</span>() )</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>reforestation_hectares</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 528 × 3
# Groups:   unidad_geografica_str, ano [528]
   unidad_geografica_str   valor ano       
   &lt;chr&gt;                   &lt;dbl&gt; &lt;date&gt;    
 1 Nacional              14513.  1993-01-01
 2 Aguascalientes          123.  1993-01-01
 3 Durango                 648.  1993-01-01
 4 Guanajuato               42.8 1993-01-01
 5 Guerrero                737.  1993-01-01
 6 Hidalgo                 285.  1993-01-01
 7 Jalisco                 316.  1993-01-01
 8 México                  734   1993-01-01
 9 Michoacán               802.  1993-01-01
10 Morelos                 982.  1993-01-01
# ℹ 518 more rows</code></pre>
</div>
</div>
<p>Now I will do my last iteration with this data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>reforestation_list <span class="ot">&lt;-</span> all_the_data <span class="sc">|&gt;</span> <span class="fu">distinct</span>(unidad_geografica_str) <span class="sc">|&gt;</span> <span class="fu">pull</span>(unidad_geografica_str)</span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>reforestation_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Aguascalientes"      "Durango"             "Guanajuato"         
 [4] "Guerrero"            "Hidalgo"             "Jalisco"            
 [7] "México"              "Michoacán"           "Morelos"            
[10] "Nayarit"             "Nuevo León"          "Baja California"    
[13] "Oaxaca"              "Puebla"              "Querétaro"          
[16] "Quintana Roo"        "San Luis Potosí"     "Sinaloa"            
[19] "Sonora"              "Tabasco"             "Tamaulipas"         
[22] "Tlaxcala"            "Baja California Sur" "Veracruz"           
[25] "Yucatán"             "Zacatecas"           "Campeche"           
[28] "Coahuila"            "Colima"              "Chiapas"            
[31] "Chihuahua"           "Ciudad de México"    "Nacional"           </code></pre>
</div>
</div>
<p>Now I plot the data with a function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>plot_reforestation <span class="ot">&lt;-</span> <span class="cf">function</span>(plot_state) {</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  reforestation_hectares <span class="sc">|&gt;</span> </span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unidad_geografica_str <span class="sc">==</span> plot_state) <span class="sc">|&gt;</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ano, <span class="at">y =</span> valor, <span class="at">color =</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">str_glue</span>(<span class="st">"Hectares reforested in each Mexican state: "</span>, plot_state<span class="sc">|&gt;</span> <span class="fu">str_to_title</span>()), <span class="at">x=</span> <span class="st">"Year"</span>, <span class="at">y=</span> <span class="st">"Value"</span>, <span class="at">color =</span> <span class="st">"State"</span>, <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"At the national level, the most amount of hectares reforested was 375,705.790 in 2012."</span>), <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a><span class="do">## This is an example to make sure that it works: </span></span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_reforestation</span>(reforestation_list[[<span class="dv">1</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now I will plot each state:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>reforestation_list <span class="sc">|&gt;</span> </span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(plot_reforestation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[2]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[3]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[4]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[5]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[6]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[7]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[8]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[9]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[10]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[11]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-11.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[12]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-12.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[13]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-13.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[14]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-14.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[15]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-15.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[16]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-16.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[17]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-17.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[18]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-18.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[19]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-19.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[20]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-20.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[21]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-21.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[22]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-22.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[23]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-23.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[24]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-24.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[25]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-25.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[26]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-26.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[27]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-27.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[28]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-28.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[29]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-29.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[30]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-30.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[31]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-31.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[32]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-32.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[[33]]</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-19-33.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Data takeaway: The national amount of hectares reforested is not surprisingly the entity with the highest amount of hectares. The peak of reforestation happened in 2012, with 375,705.790 hectares reforested in 2012. In 2020, the total amount of hectares reforested dropped to a stunning 4,618.38.</p>
</section>
<section id="comparing-all-32-state-rankings" class="level2">
<h2 class="anchored" data-anchor-id="comparing-all-32-state-rankings">Comparing all 32 state rankings</h2>
<p>Here I will use a ranking to determine how well each state performed in each category.</p>
<p>Starting with the ranking for the climate change index:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>climate_rank <span class="ot">&lt;-</span> climate_change_index <span class="sc">|&gt;</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano) <span class="sc">|&gt;</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Group by year so I could see the ranking by year </span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ranking =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(valor))) <span class="sc">|&gt;</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Then created the rank variable in descending order because a higher score is a better score. </span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(<span class="fu">desc</span>(valor)) <span class="sc">|&gt;</span> </span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="do">## I wanted to visualize the highest to lowest scores all together </span></span>
<span id="cb169-8"><a href="#cb169-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">source =</span> <span class="st">"Climate"</span>)</span>
<span id="cb169-9"><a href="#cb169-9" aria-hidden="true" tabindex="-1"></a>climate_rank</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 384 × 5
# Groups:   ano [12]
   unidad_geografica_str valor ano        ranking source 
   &lt;chr&gt;                 &lt;dbl&gt; &lt;date&gt;       &lt;int&gt; &lt;chr&gt;  
 1 Ciudad de México       83.4 2015-01-01       1 Climate
 2 Ciudad de México       83.2 2016-01-01       1 Climate
 3 Ciudad de México       80.4 2014-01-01       1 Climate
 4 Ciudad de México       80.2 2013-01-01       1 Climate
 5 Ciudad de México       80.1 2012-01-01       1 Climate
 6 Ciudad de México       80.0 2011-01-01       1 Climate
 7 Ciudad de México       78.3 2018-01-01       1 Climate
 8 Ciudad de México       77.3 2017-01-01       1 Climate
 9 Ciudad de México       71.8 2020-01-01       1 Climate
10 Ciudad de México       71.7 2022-01-01       1 Climate
# ℹ 374 more rows</code></pre>
</div>
</div>
<p>I am using a column graph to show the ranking distribution of each state per year:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a> climate_rank_chart <span class="ot">&lt;-</span> climate_rank <span class="sc">|&gt;</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> ranking, <span class="at">x=</span> ano <span class="sc">|&gt;</span> <span class="fu">year</span>() <span class="sc">|&gt;</span> <span class="fu">as.character</span>(), <span class="at">y=</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span> </span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> ranking), <span class="at">color =</span> <span class="st">"white"</span>)<span class="sc">+</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"State"</span>,</span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Climate change index ranking by year for each Mexican state"</span>,</span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Ranking"</span>, </span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"Ciudad de México constantly had the highest ranking for climate change index score. Notably, Mexico City has the highest population density of the country."</span>), </span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb171-12"><a href="#cb171-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb171-13"><a href="#cb171-13" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb171-14"><a href="#cb171-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-15"><a href="#cb171-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-16"><a href="#cb171-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggsave</span>(<span class="st">"figures/climate_rank_chart.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
</div>
<p>Now we print our ranking chart so it looks good on the computer:</p>
<p><img src="figures/climate_rank_chart.png" class="img-fluid"></p>
<p>Data takeaway: Ranking each of the 32 federal entities from 1 to 32, we can show that a higher ranking which is associated with a better score performance is represented with a darker blue shade. Aguascalientes and Ciudad de México consistently have a higher ranking per year, while states like Tabasco and Chiapas consistently ranked lower. Ciudad de México is a large urban area, where the data might observe less natural resources.</p>
<p>Now I want to look at the water insecurity percentage data and rank each states performance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>water_insecurity_rank <span class="ot">&lt;-</span> water_insecurity_percent <span class="sc">|&gt;</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano) <span class="sc">|&gt;</span></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Group by year so I could see the ranking by year </span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ranking =</span> <span class="fu">dense_rank</span>(valor)) <span class="sc">|&gt;</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Then created the rank variable in descending order because a higher score is a better score. </span></span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(valor) <span class="sc">|&gt;</span></span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a><span class="do">## I wanted to visualize the highest to lowest scores all together </span></span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">source =</span> <span class="st">"Water insecurity"</span>)</span>
<span id="cb173-9"><a href="#cb173-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-10"><a href="#cb173-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-11"><a href="#cb173-11" aria-hidden="true" tabindex="-1"></a>water_insecurity_rank</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 66 × 5
# Groups:   ano [2]
   unidad_geografica_str valor ano        ranking source          
   &lt;chr&gt;                 &lt;dbl&gt; &lt;date&gt;       &lt;int&gt; &lt;chr&gt;           
 1 Yucatán                3.55 2021-01-01       1 Water insecurity
 2 Chihuahua              3.85 2021-01-01       2 Water insecurity
 3 Quintana Roo           4.38 2021-01-01       3 Water insecurity
 4 Tamaulipas             4.52 2021-01-01       4 Water insecurity
 5 Tlaxcala               5.14 2022-01-01       1 Water insecurity
 6 Yucatán                5.50 2022-01-01       2 Water insecurity
 7 Campeche               6.72 2022-01-01       3 Water insecurity
 8 Nuevo León             7.00 2021-01-01       5 Water insecurity
 9 Sinaloa                7.32 2022-01-01       4 Water insecurity
10 Colima                 7.65 2021-01-01       6 Water insecurity
# ℹ 56 more rows</code></pre>
</div>
</div>
<p>Now I want to visualize the ranking:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>water_insecurity_chart <span class="ot">&lt;-</span> water_insecurity_rank <span class="sc">|&gt;</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> ranking, <span class="at">x=</span> ano <span class="sc">|&gt;</span> <span class="fu">year</span>() <span class="sc">|&gt;</span> <span class="fu">as.character</span>(), <span class="at">y=</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> ranking), <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"State"</span>,</span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Water insecurity performance ranking by year for each Mexican state"</span>,</span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Ranking"</span>,</span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"Nuevo León had 7.004% of homes with not enough available water in 2021, ranking in fifth place compared to other states. In 2022, the state ranked in last place with 42.014% of homes experiencing water insecurity in 2022."</span>), </span>
<span id="cb175-11"><a href="#cb175-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb175-12"><a href="#cb175-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb175-13"><a href="#cb175-13" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb175-14"><a href="#cb175-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-15"><a href="#cb175-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-16"><a href="#cb175-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggsave</span>(<span class="st">"figures/water_insecurity_chart.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
</div>
<p><img src="figures/water_insecurity_chart.png" class="img-fluid"></p>
<p>Groundwater ranking for the states with the most amount of groundwater is represented with this data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>groundwater_rank <span class="ot">&lt;-</span> groundwater_volume <span class="sc">|&gt;</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano) <span class="sc">|&gt;</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Group by year so I could see the ranking by year </span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ranking =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(valor))) <span class="sc">|&gt;</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Then created the rank variable in descending order because a higher score is a better score. </span></span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(<span class="fu">desc</span>(valor)) <span class="sc">|&gt;</span> </span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a><span class="do">## I wanted to visualize the highest to lowest scores all together </span></span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>   <span class="fu">add_column</span>(<span class="at">source =</span> <span class="st">"Groundwater"</span>)</span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a>groundwater_rank</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 64 × 5
# Groups:   ano [2]
   unidad_geografica_str valor ano        ranking source     
   &lt;chr&gt;                 &lt;dbl&gt; &lt;date&gt;       &lt;int&gt; &lt;chr&gt;      
 1 Tabasco               7613. 2018-01-01       1 Groundwater
 2 Tabasco               7556. 2020-01-01       1 Groundwater
 3 Yucatán               2843. 2018-01-01       2 Groundwater
 4 Chiapas               2755. 2020-01-01       2 Groundwater
 5 Chiapas               2747. 2018-01-01       3 Groundwater
 6 Yucatán               2387. 2020-01-01       3 Groundwater
 7 Guerrero               762. 2018-01-01       4 Groundwater
 8 Guerrero               719. 2020-01-01       4 Groundwater
 9 Veracruz               655. 2018-01-01       5 Groundwater
10 Veracruz               528. 2020-01-01       5 Groundwater
# ℹ 54 more rows</code></pre>
</div>
</div>
<p>Now we will visualize the groundwater ranking:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>groundwater_chart <span class="ot">&lt;-</span> groundwater_rank <span class="sc">|&gt;</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> ranking, <span class="at">x=</span> ano <span class="sc">|&gt;</span> <span class="fu">year</span>() <span class="sc">|&gt;</span> <span class="fu">as.character</span>(), <span class="at">y=</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> ranking), <span class="at">color=</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"State"</span>,</span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Amount of available groundwater volume for each Mexican state"</span>,</span>
<span id="cb179-9"><a href="#cb179-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Ranking"</span>, </span>
<span id="cb179-10"><a href="#cb179-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"Nuevo León has a significant deficit of groundwater availablility, with -294.150 millions of cubic meters of groundwater."</span>), </span>
<span id="cb179-11"><a href="#cb179-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb179-12"><a href="#cb179-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb179-13"><a href="#cb179-13" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb179-14"><a href="#cb179-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-15"><a href="#cb179-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-16"><a href="#cb179-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggsave</span>(<span class="st">"figures/groundwater_chart.png"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
</div>
<p><img src="figures/groundwater_chart.png" class="img-fluid"></p>
<p>Finally, lets look at the ranking for reforestation efforts in each state:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>reforestation_rank <span class="ot">&lt;-</span> reforestation_hectares <span class="sc">|&gt;</span> </span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unidad_geografica_str <span class="sc">!=</span> <span class="st">"Nacional"</span>) <span class="sc">|&gt;</span></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano) <span class="sc">|&gt;</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Group by year so I could see the ranking by year </span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ranking =</span> <span class="fu">dense_rank</span>(<span class="fu">desc</span>(valor))) <span class="sc">|&gt;</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Then created the rank variable in descending order because a higher score is a better score. </span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(<span class="fu">desc</span>(valor)) <span class="sc">|&gt;</span> </span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a><span class="do">## I wanted to visualize the highest to lowest scores all together </span></span>
<span id="cb181-9"><a href="#cb181-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_column</span>(<span class="at">source =</span> <span class="st">"Reforestation"</span>)</span>
<span id="cb181-10"><a href="#cb181-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-11"><a href="#cb181-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-12"><a href="#cb181-12" aria-hidden="true" tabindex="-1"></a>reforestation_rank</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 512 × 5
# Groups:   ano [16]
   unidad_geografica_str  valor ano        ranking source       
   &lt;chr&gt;                  &lt;dbl&gt; &lt;date&gt;       &lt;int&gt; &lt;chr&gt;        
 1 San Luis Potosí       35176. 2012-01-01       1 Reforestation
 2 Coahuila              31747  2012-01-01       2 Reforestation
 3 Veracruz              29315. 2012-01-01       3 Reforestation
 4 Zacatecas             28395  2012-01-01       4 Reforestation
 5 Coahuila              24380  2011-01-01       1 Reforestation
 6 Chiapas               24009. 2012-01-01       5 Reforestation
 7 Veracruz              23735  2005-01-01       1 Reforestation
 8 Puebla                22390. 2012-01-01       6 Reforestation
 9 Tamaulipas            21571  2000-01-01       1 Reforestation
10 Quintana Roo          20386  2000-01-01       2 Reforestation
# ℹ 502 more rows</code></pre>
</div>
</div>
<p>Now I will visualize the data using ggplot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>reforestation_chart <span class="ot">&lt;-</span> reforestation_rank <span class="sc">|&gt;</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> ranking, <span class="at">x=</span> ano <span class="sc">|&gt;</span> <span class="fu">year</span>() <span class="sc">|&gt;</span> <span class="fu">as.character</span>(), <span class="at">y=</span> unidad_geografica_str)) <span class="sc">+</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> ranking), <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span> </span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"State"</span>,</span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Hectares reforested in each Mexican state"</span>,</span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Ranking"</span>, </span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"Hectares of reforested areas in each state vary consistently. The year 2012 had a significant increase in reforested areas, with states like San Luis Potosi and Coahuila leading in rank."</span>), </span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a>   <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb183-14"><a href="#cb183-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-15"><a href="#cb183-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-16"><a href="#cb183-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggsave</span>(<span class="st">"figures/reforestation_chart.png"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
</div>
<p><img src="figures/reforestation_chart.png" class="img-fluid"></p>
</section>
<section id="nuevo-león-ranking" class="level2">
<h2 class="anchored" data-anchor-id="nuevo-león-ranking">Nuevo León ranking</h2>
<p>In order to see how my home state of Nuevo León did in all of the categories I have to put the ranking data together:</p>
<p>I will combine the ranking using bind.rows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>nuevo_leon_ranking <span class="ot">&lt;-</span> </span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(climate_rank, water_insecurity_rank, groundwater_rank, reforestation_rank) <span class="sc">|&gt;</span> </span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unidad_geografica_str <span class="sc">==</span> <span class="st">"Nuevo León"</span>)</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>nuevo_leon_ranking</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 32 × 5
# Groups:   ano [17]
   unidad_geografica_str valor ano        ranking source 
   &lt;chr&gt;                 &lt;dbl&gt; &lt;date&gt;       &lt;int&gt; &lt;chr&gt;  
 1 Nuevo León             68.8 2014-01-01       3 Climate
 2 Nuevo León             68.1 2016-01-01       3 Climate
 3 Nuevo León             67.4 2015-01-01       2 Climate
 4 Nuevo León             66.1 2013-01-01       3 Climate
 5 Nuevo León             62.7 2012-01-01       3 Climate
 6 Nuevo León             59.9 2017-01-01       4 Climate
 7 Nuevo León             57.6 2011-01-01       9 Climate
 8 Nuevo León             56.1 2018-01-01       5 Climate
 9 Nuevo León             39.0 2019-01-01       5 Climate
10 Nuevo León             37.6 2022-01-01       4 Climate
# ℹ 22 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="do">## We added the source column in each ranking break down </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Visualize the ranking for Nuevo León:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>nuevo_leon_ranking  <span class="sc">|&gt;</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">fill =</span> ranking, <span class="at">x=</span> ano <span class="sc">|&gt;</span> <span class="fu">year</span>() <span class="sc">|&gt;</span> <span class="fu">as.character</span>(), <span class="at">y=</span> source)) <span class="sc">+</span></span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_tile</span>()<span class="sc">+</span></span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> ranking), <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb188-6"><a href="#cb188-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb188-7"><a href="#cb188-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Category"</span>,</span>
<span id="cb188-8"><a href="#cb188-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Nuevo León ranking in all four categories"</span>,</span>
<span id="cb188-9"><a href="#cb188-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Ranking"</span>, </span>
<span id="cb188-10"><a href="#cb188-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"Each tile represents the ranking position of the state of Nuevo León for the four different categories: climate change index, water insecurity, groundwater and reforestation. Even though Nuevo León placed 33rd in 2022 for water insecurity, which is the lowest ranking position, the state ranked fourth in the same year for climate change index."</span>), </span>
<span id="cb188-11"><a href="#cb188-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source = Consejo Nuevo León"</span></span>
<span id="cb188-12"><a href="#cb188-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb188-13"><a href="#cb188-13" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02-analysis_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">ggsave</span>(<span class="st">"figures/nuevo_leon_ranking.png"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 7 x 5 in image</code></pre>
</div>
</div>
<p><img src="figures/nuevo_leon_ranking.png" class="img-fluid"></p>
<p>Data takeaways: Each tile represents the ranking position of the state of Nuevo León for the four different categories: climate change index, water insecurity, groundwater and reforestation. Even though Nuevo León placed thirty third in 2022 for water insecurity (including the ranking for the whole nation plus 32 federal entities), which is the lowest ranking, the state ranked fourth in the same year for climate change index, or how well the state uses its natural resources. Extra reporting and investigation would be needed to asses these contrasting results.</p>
<p>For the category of reforestation, Nuevo León has significantly improved when compared to other states. In 1993, Nuevo León occupied 16th place, but moved up to fourth in 2022.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>